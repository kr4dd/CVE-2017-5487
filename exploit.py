#!/usr/bin/env python3

from urllib.request import urlopen
from sys import exit
from signal import signal, SIGINT

import json

def handler(signal_received, frame):
    print("Exiting...")
    exit(0)

def readURL(url):
    payload = "?rest_route=/wp/v2/users/"
    urlp = url + payload
    
    response = urlopen(urlp)
    data_json = json.loads(response.read())
    
    for user in data_json:
        print("-------------------------------")
        print("ID: "    + str(user["id"]))
        print("NAME: "  + str(user["name"]))
        print("SLUG: "  + str(user["slug"]))
        print("-------------------------------\n")

if __name__ == "__main__":
    signal(SIGINT, handler)

    url = input("Set url: ")
    print("[*] Show users:")

    readURL(url);
